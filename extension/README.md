# Firedash Monarch Bridge Extension

This Chrome extension fetches Monarch Money portfolio data for the Firedash app.

## Structure
- `manifest.json` — MV3 manifest wiring the service worker and content script.
- `src/background.ts` — service worker that fetches Monarch data and exposes it via runtime messaging.
- `src/content-script.ts` — injected on the Monarch web app to read the auth token and device UUID from `localStorage`.
- `dist/` — build output generated by `npm run build:extension`.

## Flow
1. With Monarch open in a Chrome tab, Firedash sends `FETCH_MONARCH_SNAPSHOT` to the extension.
2. The background worker requests credentials from the content script (token + device UUID).
3. The worker calls Monarch's `Web_GetPortfolio` GraphQL endpoint using the captured headers.
4. Aggregate holdings are converted with `importMonarchInvestments` and stored in `chrome.storage.local`.
5. Firedash receives the parsed snapshot payload and loads it directly.

## Development
Run `npm run build:extension` to bundle the worker and content script into `extension/dist/` before loading the extension in Chrome via “Load unpacked…”.
## Firedash Integration
- Open Firedash in Chrome and navigate to Upload → Fetch Live Snapshot (Chrome Extension).
- Paste the extension ID from chrome://extensions (Details page) and click "Fetch from Monarch".
- Keep the Monarch Money web app open in another tab so the content script can read fresh credentials.

